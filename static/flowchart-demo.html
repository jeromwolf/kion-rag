<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG íŒŒì´í”„ë¼ì¸ ìˆœì„œë„ - KION RAG</title>
    <style>
        :root {
            --primary: #1565C0;
            --success: #4CAF50;
            --warning: #FF9800;
            --purple: #7B1FA2;
            --teal: #00897B;
            --dark: #333;
            --gray: #666;
            --light: #f5f5f5;
            --white: #fff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 50%, #dfe6ed 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: var(--dark);
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .header p {
            color: var(--gray);
            font-size: 16px;
        }

        .badge-row {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 16px;
        }

        .badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }

        .badge-blue { background: #E3F2FD; color: var(--primary); border: 1px solid var(--primary); }
        .badge-green { background: #E8F5E9; color: var(--success); border: 1px solid var(--success); }
        .badge-purple { background: #F3E5F5; color: var(--purple); border: 1px solid var(--purple); }

        /* Query Box */
        .query-box {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 24px 32px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(21, 101, 192, 0.15);
        }

        .query-label {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .query-text {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary);
        }

        /* Flowchart */
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .step {
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            padding: 24px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            position: relative;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .step-number {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            color: white;
            flex-shrink: 0;
        }

        .step-number.blue { background: linear-gradient(135deg, #1565C0, #1976D2); }
        .step-number.green { background: linear-gradient(135deg, #388E3C, #4CAF50); }
        .step-number.orange { background: linear-gradient(135deg, #F57C00, #FF9800); }
        .step-number.purple { background: linear-gradient(135deg, #7B1FA2, #9C27B0); }
        .step-number.teal { background: linear-gradient(135deg, #00695C, #00897B); }

        .step-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .step-subtitle {
            font-size: 13px;
            color: var(--gray);
        }

        .step-content {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
        }

        /* Arrow */
        .arrow {
            width: 4px;
            height: 30px;
            background: var(--primary);
            position: relative;
        }

        .arrow::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 12px solid var(--primary);
        }

        /* Tags */
        .tag-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .tag {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }

        .tag-blue { background: #E3F2FD; color: var(--primary); }
        .tag-green { background: #E8F5E9; color: var(--success); }
        .tag-orange { background: #FFF3E0; color: var(--warning); }
        .tag-purple { background: #F3E5F5; color: var(--purple); }
        .tag-teal { background: #E0F2F1; color: var(--teal); }
        .tag-gray { background: #ECEFF1; color: var(--gray); }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .col-box {
            background: white;
            border-radius: 10px;
            padding: 16px;
        }

        .col-box h4 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Filter Grid */
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .filter-item {
            background: var(--light);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 2px solid transparent;
        }

        .filter-item.active {
            border-color: var(--success);
            background: #E8F5E9;
        }

        .filter-item .label {
            font-size: 11px;
            color: var(--gray);
            margin-bottom: 4px;
        }

        .filter-item .value {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
        }

        .filter-item.active .value {
            color: var(--success);
        }

        /* Policy Items */
        .policy-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .policy-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: var(--light);
            border-radius: 8px;
            font-size: 13px;
        }

        .policy-item .icon {
            font-size: 16px;
        }

        .policy-item .text {
            flex: 1;
            color: var(--dark);
        }

        .policy-item .status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 10px;
        }

        .policy-item .status.pass { background: #E8F5E9; color: var(--success); }
        .policy-item .status.info { background: #E3F2FD; color: var(--primary); }

        /* Result Box */
        .result-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .result-box {
            background: white;
            border-radius: 10px;
            padding: 14px 16px;
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .result-rank {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            flex-shrink: 0;
        }

        .result-info {
            flex: 1;
        }

        .result-name {
            font-weight: 600;
            color: var(--dark);
            font-size: 14px;
        }

        .result-meta {
            font-size: 12px;
            color: var(--gray);
            margin-top: 2px;
        }

        .result-score {
            font-size: 18px;
            font-weight: 700;
            color: var(--success);
        }

        /* Process Flow */
        .process-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .process-item {
            text-align: center;
            padding: 10px 14px;
            background: white;
            border-radius: 8px;
            min-width: 80px;
        }

        .process-item .icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .process-item .text {
            font-size: 11px;
            color: var(--gray);
        }

        .process-arrow {
            font-size: 16px;
            color: var(--gray);
        }

        /* LLM Response */
        .llm-response {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--purple);
        }

        .llm-response p {
            font-size: 14px;
            line-height: 1.8;
            color: var(--dark);
        }

        .llm-response strong {
            color: var(--purple);
        }

        /* Parallel Box */
        .parallel-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }

        .parallel-step {
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .parallel-step .step-number {
            width: 36px;
            height: 36px;
            font-size: 14px;
        }

        .parallel-step .step-title {
            font-size: 15px;
        }

        /* Code block */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 12px 16px;
            border-radius: 8px;
            font-family: 'SF Mono', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin-top: 12px;
        }

        .code-block .keyword { color: #569CD6; }
        .code-block .string { color: #CE9178; }
        .code-block .number { color: #B5CEA8; }

        /* Stats row */
        .stats-row {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e0e0e0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item .value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-item .label {
            font-size: 12px;
            color: var(--gray);
        }

        /* Back link */
        .back-link {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
        }

        .back-link a {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            padding: 10px 20px;
            border: 1px solid var(--primary);
            border-radius: 8px;
            margin: 0 8px;
            transition: all 0.2s;
            background: white;
        }

        .back-link a:hover {
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .two-col, .parallel-container {
                grid-template-columns: 1fr;
            }
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>KION RAG íŒŒì´í”„ë¼ì¸</h1>
            <p>Hybrid RAG: BM25 + ë²¡í„° ê²€ìƒ‰ + ì˜ë„ íŒŒì•… + ì„¸ì…˜ ê´€ë¦¬</p>
            <div class="badge-row">
                <span class="badge badge-blue">BM25 + Vector</span>
                <span class="badge badge-purple">Intent Parser</span>
                <span class="badge badge-green">Session</span>
            </div>
            <div class="badge-row" style="margin-top: 8px;">
                <span class="badge" style="background: #ECEFF1; color: #666; border: 1px solid #B0BEC5;">BGE-M3</span>
                <span class="badge" style="background: #ECEFF1; color: #666; border: 1px solid #B0BEC5;">ChromaDB</span>
                <span class="badge" style="background: #ECEFF1; color: #666; border: 1px solid #B0BEC5;">Qwen 2.5 32B</span>
            </div>
        </div>

        <!-- Query -->
        <div class="query-box">
            <div class="query-label">ì‚¬ìš©ì ì§ˆì˜ (User Query)</div>
            <div class="query-text">"6 inch Si ì›¨ì´í¼, ê²Œì´íŠ¸ ì‚°í™”ë§‰ 5nm, RTA í•„ìš”, 400â„ƒ ì´ìƒ"</div>
        </div>

        <div class="flowchart">

            <!-- Step 1: Query Analysis -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number blue">1</div>
                    <div>
                        <div class="step-title">ì§ˆì˜ ë¶„ì„ (Query Analysis)</div>
                        <div class="step-subtitle">ìì—°ì–´ì—ì„œ ì˜ë„ì™€ ì¡°ê±´ ì¶”ì¶œ</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box">
                            <h4>ğŸ” í‚¤ì›Œë“œ ì¶”ì¶œ</h4>
                            <div class="tag-group">
                                <span class="tag tag-blue">6 inch</span>
                                <span class="tag tag-blue">Si</span>
                                <span class="tag tag-green">ê²Œì´íŠ¸ ì‚°í™”ë§‰</span>
                                <span class="tag tag-orange">RTA</span>
                                <span class="tag tag-purple">400â„ƒ</span>
                                <span class="tag tag-teal">5nm</span>
                            </div>
                        </div>
                        <div class="col-box">
                            <h4>ğŸ·ï¸ ë©”íƒ€ë°ì´í„° ë§¤í•‘</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="text">ì›¨ì´í¼ ì‚¬ì´ì¦ˆ â†’ 6 inch</span>
                                    <span class="status pass">ë§¤í•‘ë¨</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ì¬ë£Œ â†’ Si (Silicon)</span>
                                    <span class="status pass">ë§¤í•‘ë¨</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ê³µì • ì¹´í…Œê³ ë¦¬ â†’ ì—´ì²˜ë¦¬</span>
                                    <span class="status pass">ë§¤í•‘ë¨</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 1.5: Intent Parsing (NEW) -->
            <div class="step" style="border: 2px solid #7B1FA2;">
                <div class="step-header">
                    <div class="step-number purple">1.5</div>
                    <div>
                        <div class="step-title">ì˜ë„ íŒŒì•… (Intent Parsing) <span style="background: #4CAF50; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 8px;">NEW</span></div>
                        <div class="step-subtitle">ë³µì¡í•œ ì§ˆì˜ ë¶„ì„ (ë¶€ì •ë¬¸, ë³µí•©, ì—°ê³„ ì§ˆì˜)</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box">
                            <h4>ğŸ§  ë¹ ë¥¸ ì˜ë„ ì²´í¬</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="icon">âŒ</span>
                                    <span class="text">ë¶€ì •ë¬¸: "800ë„ ì´í•˜ë¡œë§Œ"</span>
                                    <span class="status" style="background: #F3E5F5; color: #7B1FA2;">ê°ì§€</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">â•</span>
                                    <span class="text">ë³µí•©: "MOCVDë‘ PECVD ë‘˜ ë‹¤"</span>
                                    <span class="status" style="background: #F3E5F5; color: #7B1FA2;">ê°ì§€</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ”—</span>
                                    <span class="text">ì—°ê³„: "8ì¸ì¹˜ë¡œ ë°”ê¿”ì¤˜"</span>
                                    <span class="status" style="background: #E8F5E9; color: #4CAF50;">ì„¸ì…˜</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-box">
                            <h4>ğŸ¯ LLM ì˜ë„ ë¶„ì„ (ë³µì¡í•œ ê²½ìš°ë§Œ)</h4>
                            <div class="code-block">
<span class="keyword">// quick_intent_check() â†’ needs_llm_parsing</span>
{
  query_type: <span class="string">"negative"</span>,
  exclude_temp_min: <span class="number">800</span>,
  search_query: <span class="string">"800ë„ ì´í•˜ ì—´ì²˜ë¦¬"</span>
}
                            </div>
                            <div style="margin-top: 10px; font-size: 12px; color: #666;">
                                <code>app/intent_parser.py</code> | <code>app/conversation.py</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 2: Parallel - Embedding & Policy -->
            <div class="parallel-container">
                <!-- 2A: Embedding -->
                <div class="parallel-step">
                    <div class="step-header">
                        <div class="step-number blue">2A</div>
                        <div>
                            <div class="step-title">ì„ë² ë”© ìƒì„±</div>
                            <div class="step-subtitle">BGE-M3 â†’ 1024ì°¨ì› ë²¡í„°</div>
                        </div>
                    </div>
                    <div class="step-content">
                        <div class="process-flow">
                            <div class="process-item">
                                <div class="icon">ğŸ’¬</div>
                                <div class="text">ì§ˆì˜</div>
                            </div>
                            <div class="process-arrow">â†’</div>
                            <div class="process-item">
                                <div class="icon">ğŸ¤–</div>
                                <div class="text">BGE-M3</div>
                            </div>
                            <div class="process-arrow">â†’</div>
                            <div class="process-item">
                                <div class="icon">ğŸ“</div>
                                <div class="text">Vector</div>
                            </div>
                        </div>
                        <div class="code-block">
                            [<span class="number">0.0234</span>, <span class="number">-0.0891</span>, <span class="number">0.1523</span>, ...] <span class="keyword">// 1024 dim</span>
                        </div>
                    </div>
                </div>

                <!-- 2B: Policy DB -->
                <div class="parallel-step">
                    <div class="step-header">
                        <div class="step-number teal">2B</div>
                        <div>
                            <div class="step-title">Policy DB ì¡°íšŒ</div>
                            <div class="step-subtitle">ê³µì •-ì¥ë¹„ ë§¤í•‘, ê¸°ê´€ ì •ì±…</div>
                        </div>
                    </div>
                    <div class="step-content">
                        <div class="policy-list">
                            <div class="policy-item">
                                <span class="icon">ğŸ­</span>
                                <span class="text">RTA â†’ ì—´ì²˜ë¦¬ ì¹´í…Œê³ ë¦¬</span>
                                <span class="status info">ë§¤í•‘</span>
                            </div>
                            <div class="policy-item">
                                <span class="icon">ğŸ“‹</span>
                                <span class="text">ê²Œì´íŠ¸ ì‚°í™”ë§‰ â†’ Oxidation</span>
                                <span class="status info">ë§¤í•‘</span>
                            </div>
                            <div class="policy-item">
                                <span class="icon">ğŸ¢</span>
                                <span class="text">ê¸°ê´€ ìš°ì„ ìˆœìœ„ ì ìš©</span>
                                <span class="status pass">ì ìš©</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 3: Hybrid Search (BM25 + Vector) -->
            <div class="step" style="border: 2px solid #1565C0;">
                <div class="step-header">
                    <div class="step-number blue">3</div>
                    <div>
                        <div class="step-title">í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (Hybrid Search) <span style="background: #4CAF50; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 8px;">NEW</span></div>
                        <div class="step-subtitle">BM25 í‚¤ì›Œë“œ ê²€ìƒ‰ + ë²¡í„° ì‹œë©˜í‹± ê²€ìƒ‰ ê²°í•©</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box" style="border-left: 4px solid #1565C0;">
                            <h4>ğŸ”¤ BM25 (í‚¤ì›Œë“œ)</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="text">ê¸°ìˆ  ìš©ì–´ ì •í™• ë§¤ì¹­</span>
                                    <span class="status info">MOCVD</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ìŠ¤í™ ë§¤ì¹­</span>
                                    <span class="status info">6inch</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ì˜¨ë„ ë‹¨ìœ„</span>
                                    <span class="status info">400â„ƒ</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-box" style="border-left: 4px solid #4CAF50;">
                            <h4>ğŸ“ Vector (ì‹œë©˜í‹±)</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="text">ì˜ë¯¸ ê¸°ë°˜ ìœ ì‚¬ë„</span>
                                    <span class="status pass">Cosine</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ë™ì˜ì–´ ì²˜ë¦¬</span>
                                    <span class="status pass">âœ“</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">ë¬¸ë§¥ ì´í•´</span>
                                    <span class="status pass">âœ“</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="code-block" style="margin-top: 16px;">
<span class="keyword">// hybrid_search()</span>
hybrid_score = vector_score Ã— <span class="number">0.5</span> + bm25_score Ã— <span class="number">0.5</span>
<span class="keyword">// app/hybrid_search.py</span>
                    </div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <div class="value">102</div>
                            <div class="label">ì „ì²´ ì¥ë¹„</div>
                        </div>
                        <div class="stat-item">
                            <div class="value" style="color: var(--primary);">â†’</div>
                            <div class="label"></div>
                        </div>
                        <div class="stat-item">
                            <div class="value" style="color: var(--success);">20</div>
                            <div class="label">í•˜ì´ë¸Œë¦¬ë“œ Top-K</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 4: Post-filtering (Hard ì¡°ê±´ë§Œ) -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number orange">4</div>
                    <div>
                        <div class="step-title">ë©”íƒ€ë°ì´í„° í•„í„°ë§ (Post-filtering)</div>
                        <div class="step-subtitle">ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ì—ì„œ Hard ì¡°ê±´ í•„í„°</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box">
                            <h4>ğŸ”´ Hard ì¡°ê±´ (í•„ìˆ˜)</h4>
                            <div class="filter-grid">
                                <div class="filter-item active">
                                    <div class="label">ì›¨ì´í¼</div>
                                    <div class="value">6 inch âœ“</div>
                                </div>
                                <div class="filter-item active">
                                    <div class="label">ì˜¨ë„</div>
                                    <div class="value">â‰¥400â„ƒ âœ“</div>
                                </div>
                            </div>
                            <h4 style="margin-top: 16px;">ğŸŸ¡ Soft ì¡°ê±´ (ìœ ì—°)</h4>
                            <div class="filter-grid">
                                <div class="filter-item" style="border-color: #FFB74D;">
                                    <div class="label">ì¬ë£Œ</div>
                                    <div class="value" style="color: #F57C00;">Si (ê°€ì¤‘ì¹˜)</div>
                                </div>
                                <div class="filter-item" style="border-color: #FFB74D;">
                                    <div class="label">ì¹´í…Œê³ ë¦¬</div>
                                    <div class="value" style="color: #F57C00;">ì—´ì²˜ë¦¬ (ê°€ì¤‘ì¹˜)</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-box">
                            <h4>ğŸ“Š í•„í„°ë§ ê²°ê³¼</h4>
                            <div class="stats-row" style="border: none; padding: 0; margin: 0;">
                                <div class="stat-item">
                                    <div class="value">20</div>
                                    <div class="label">ë²¡í„° ê²€ìƒ‰ ê²°ê³¼</div>
                                </div>
                                <div class="stat-item">
                                    <div class="value" style="color: var(--success);">â†’</div>
                                    <div class="label"></div>
                                </div>
                                <div class="stat-item">
                                    <div class="value" style="color: var(--success);">8</div>
                                    <div class="label">Hard ì¡°ê±´ í†µê³¼</div>
                                </div>
                            </div>
                            <div class="code-block" style="margin-top: 12px;">
<span class="keyword">// Hard ì¡°ê±´ë§Œ í•„í„°</span>
results.filter(eq =>
  eq.wafer_size == <span class="string">'6 inch'</span> &&
  eq.max_temp >= <span class="number">400</span>
)
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 5: Reranking -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number purple">5</div>
                    <div>
                        <div class="step-title">ë¦¬ë­í‚¹ (Reranking)</div>
                        <div class="step-subtitle">ìœ ì‚¬ë„ + Soft ì¡°ê±´ ê°€ì¤‘ì¹˜ë¡œ ìµœì¢… ìˆœìœ„ ê²°ì •</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="result-list">
                        <div class="result-box">
                            <div class="result-rank">1</div>
                            <div class="result-info">
                                <div class="result-name">RTA (6ì¸ì¹˜) - KION-102</div>
                                <div class="result-meta">í•œêµ­ë‚˜ë…¸ê¸°ìˆ ì› | ì—´ì²˜ë¦¬ | Si, SiO2 | 400~1200â„ƒ</div>
                            </div>
                            <div class="result-score">98%</div>
                        </div>
                        <div class="result-box">
                            <div class="result-rank">2</div>
                            <div class="result-info">
                                <div class="result-name">Rapid Thermal Processor - KION-045</div>
                                <div class="result-meta">ë‚˜ë…¸ì¢…í•©ê¸°ìˆ ì› | ì—´ì²˜ë¦¬ | Si | 300~1100â„ƒ</div>
                            </div>
                            <div class="result-score">92%</div>
                        </div>
                        <div class="result-box">
                            <div class="result-rank">3</div>
                            <div class="result-info">
                                <div class="result-name">Tube Furnace (6ì¸ì¹˜) - KION-078</div>
                                <div class="result-meta">ê´‘ì£¼ë‚˜ë…¸ê¸°ìˆ ì§‘ì ì„¼í„° | ì—´ì²˜ë¦¬ | Si, GaN | 500~1200â„ƒ</div>
                            </div>
                            <div class="result-score">85%</div>
                        </div>
                    </div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <div class="value">0.98</div>
                            <div class="label">ìµœê³  ìœ ì‚¬ë„</div>
                        </div>
                        <div class="stat-item">
                            <div class="value">1.2s</div>
                            <div class="label">ê²€ìƒ‰ ì‹œê°„</div>
                        </div>
                        <div class="stat-item">
                            <div class="value">3</div>
                            <div class="label">ì¶”ì²œ ì¥ë¹„</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 6: LLM Response -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number purple">6</div>
                    <div>
                        <div class="step-title">LLM ì‘ë‹µ ìƒì„± (Response Generation)</div>
                        <div class="step-subtitle">Qwen 2.5 32Bë¡œ ìì—°ì–´ ì‘ë‹µ ìƒì„±</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box">
                            <h4>ğŸ“¥ í”„ë¡¬í”„íŠ¸ êµ¬ì„±</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="icon">ğŸ“‹</span>
                                    <span class="text">ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ’¬</span>
                                    <span class="text">ì‚¬ìš©ì ì§ˆì˜</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ”§</span>
                                    <span class="text">ê²€ìƒ‰ëœ ì¥ë¹„ ì»¨í…ìŠ¤íŠ¸</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-box">
                            <h4>ğŸ“¤ ìƒì„± íŒŒë¼ë¯¸í„°</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="text">Temperature: 0.7</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">Max Tokens: 2048</span>
                                </div>
                                <div class="policy-item">
                                    <span class="text">Streaming: ON</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="llm-response" style="margin-top: 16px;">
                        <p>
                            ìš”ì²­í•˜ì‹  ì¡°ê±´ì— ë§ëŠ” ì¥ë¹„ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.<br><br>
                            <strong>RTA (6ì¸ì¹˜) [KION-102]</strong>ë¥¼ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.<br>
                            - ìœ„ì¹˜: í•œêµ­ë‚˜ë…¸ê¸°ìˆ ì›<br>
                            - ì›¨ì´í¼: 6ì¸ì¹˜ Si ì§€ì›<br>
                            - ì˜¨ë„: 400~1200â„ƒ (RTA ê³µì •)<br>
                            - ìš©ë„: ê²Œì´íŠ¸ ì‚°í™”ë§‰ í˜•ì„±ì— ì í•©<br><br>
                            <strong style="color: var(--success);">ë§¤ì¹­ë¥ : 98%</strong> | ì˜ˆì•½ ê°€ëŠ¥ | <a href="#" style="color: var(--primary);">ì˜ˆì•½í•˜ê¸° â†’</a>
                        </p>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 7: Session Save (NEW) -->
            <div class="step" style="border: 2px solid #4CAF50;">
                <div class="step-header">
                    <div class="step-number green">7</div>
                    <div>
                        <div class="step-title">ì„¸ì…˜ ì €ì¥ (Session Save) <span style="background: #4CAF50; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 8px;">NEW</span></div>
                        <div class="step-subtitle">ëŒ€í™” ì´ë ¥ ì €ì¥ìœ¼ë¡œ ì—°ê³„ ì§ˆì˜ ì§€ì›</div>
                    </div>
                </div>
                <div class="step-content">
                    <div class="two-col">
                        <div class="col-box">
                            <h4>ğŸ’¾ ì €ì¥ ì •ë³´</h4>
                            <div class="policy-list">
                                <div class="policy-item">
                                    <span class="icon">ğŸ”‘</span>
                                    <span class="text">session_id: abc12345</span>
                                    <span class="status pass">ë°œê¸‰</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ“‹</span>
                                    <span class="text">ì¶”ì¶œ ì¡°ê±´ (ì›¨ì´í¼, ì˜¨ë„, ì¬ë£Œ)</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ”§</span>
                                    <span class="text">ì¶”ì²œ ì¥ë¹„ ID ëª©ë¡</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">ğŸ’¬</span>
                                    <span class="text">ì‘ë‹µ ìš”ì•½</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-box">
                            <h4>ğŸ”— ë‹¤ìŒ ì§ˆì˜ í™œìš©</h4>
                            <div class="policy-list">
                                <div class="policy-item" style="background: #E8F5E9;">
                                    <span class="icon">ğŸ‘¤</span>
                                    <span class="text">"8ì¸ì¹˜ë¡œ ë°”ê¿”ì¤˜"</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">â†’</span>
                                    <span class="text">ì´ì „ ì¡°ê±´ + ì›¨ì´í¼=8ì¸ì¹˜</span>
                                    <span class="status pass">ë³‘í•©</span>
                                </div>
                                <div class="policy-item" style="background: #E8F5E9;">
                                    <span class="icon">ğŸ‘¤</span>
                                    <span class="text">"ë¹„ìŠ·í•œ ë‹¤ë¥¸ ì¥ë¹„ëŠ”?"</span>
                                </div>
                                <div class="policy-item">
                                    <span class="icon">â†’</span>
                                    <span class="text">ì´ì „ ì¹´í…Œê³ ë¦¬ ìœ ì§€</span>
                                    <span class="status pass">ì°¸ì¡°</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="code-block" style="margin-top: 16px;">
<span class="keyword">// conversation_manager.add_turn()</span>
{
  session_id: <span class="string">"abc12345"</span>,
  turn: <span class="number">1</span>,
  conditions: { wafer: <span class="string">"6 inch"</span>, temp_min: <span class="number">400</span> }
}
                    </div>
                </div>
            </div>

        </div>

        <div class="back-link">
            <a href="/">â† í™ˆìœ¼ë¡œ</a>
            <a href="/static/architecture.html">ì•„í‚¤í…ì²˜</a>
            <a href="/static/checklist.html">ì²´í¬ë¦¬ìŠ¤íŠ¸</a>
        </div>
    </div>
</body>
</html>
