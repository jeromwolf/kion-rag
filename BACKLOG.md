# KION RAG - 백로그

## 우선순위 높음 (다음 작업)

> **배경**: 다른 부분들은 충분히 논의/문서화됨.
> Policy DB와 Improvement는 다이어그램에만 있고 **상세 설계가 미흡**함.

---

### 1. Policy DB 상세 설계
- [ ] **기관 우선순위 테이블**
  - 테이블 스키마 정의
  - 우선순위 적용 로직 (검색 결과 정렬)
  - 관리자 UI에서 수정 방법

- [ ] **정책 설정 테이블**
  - 정책 ON/OFF 로직 (maintenance_exclude, reservation_check 등)
  - 정책 적용 시점 (검색 전/후)
  - 기본값 및 예외 처리

- [ ] **공정↔장비 매핑 테이블**
  - 매핑 데이터 구조
  - 쿼리 파싱 시 매핑 적용 로직
  - 신규 매핑 추가 프로세스

---

### 2. IMPROVEMENT 알고리즘 설계
- [ ] **임베딩 튜닝 알고리즘**
  - 👎 피드백 수집 → 오답 쿼리-장비 쌍 분석
  - Hard Negative Mining 로직
  - 주기적 Fine-tuning 트리거 (월 1회 또는 N건 누적)

- [ ] **룰 개선 알고리즘**
  - 오답 패턴 분석 → 누락된 매핑 자동 발견
  - 관리자에게 룰 추가 제안
  - 공정↔장비 매핑 자동 학습

- [ ] **프롬프트 A/B 테스트**
  - 프롬프트 버전 관리
  - 트래픽 분배 로직
  - 성능 비교 메트릭 (정확도, 관련성)
  - 우승 버전 자동 적용

---

## 문서 보완 필요

### 2. 예약 딥링크 연동
- [ ] fab.kion.or.kr 예약 URL 구조 분석
- [ ] 장비 상세 페이지 딥링크 생성 로직
- [ ] 참고: https://www.kion.or.kr/hm/equipReservation/list

### 3. 평가 기준/메트릭
- [ ] Recall@K 측정 방법 문서화
- [ ] 엣지케이스 테스트 시나리오 정의
- [ ] 품질 평가 체크리스트 작성

### 4. 쿼리 파서 상세
- [ ] 정규식 + NER 수치/단위 변환 상세 설계
- [ ] "6 inch, 4인치, 150mm" 표준화 로직 구현
- [ ] 온도, 압력 단위 변환

### 5. LLM 컨텍스트 포맷
- [ ] 장비 정보 통일 포맷 예시 작성
- [ ] 프롬프트 템플릿 표준화

---

## 참고 URL
- KION 팹서비스: https://www.kion.or.kr/hm/equipReservation/list
- fab.kion.or.kr (예약 시스템)

---

## 완료된 항목
- [x] 아키텍처 문서 (A, B-1, B-2)
- [x] 기술스택 문서
- [x] 데이터설계 문서
- [x] 구현가이드 문서
- [x] 관리자 페이지 (프롬프트 관리, 정책/룰 관리)
- [x] 전체 아키텍처 다이어그램
- [x] Policy DB 섹션
- [x] Improvement 섹션 (UI만)
- [x] Vercel 배포

---

*마지막 업데이트: 2025-12-29*
